$(function(){idend=parseInt($('#endr option:selected').val());if(idend!=0&&$('#endr').length>0){if($('#endr').attr('data-lastend').length>0){idend=$('#endr').attr('data-lastend');$('#endr option[value="'+idend+'"]').prop('selected',true);$('#endr').trigger('change');}else{$('#endr').find('option').each(function(){val=parseInt($(this).val());if(val>0){$(this).prop('selected',true);$('#endr').trigger('change');return false;}});}}
$('.modal-link').on('click',function(){$('[data-show="'+$(this).attr('id')+'"]').css('display','block');$('[data-show="'+$(this).attr('id')+'"]').children('.timesclose').on('click',function(){$(this).parent('.modal').css('display','none');if($(this).attr('data-delete')=='true')
$(this).parent('.modal').remove();});});$(document).on('makeajaxlink',function(){$('.ajaxlink').each(function(){if($(this).attr('data-href')==undefined){$(this).attr('data-href',$(this).attr('href'));$(this).attr('href','javascript:void(0);');}});$('.ajaxlink').off('click');});$(document).trigger('makeajaxlink');$('body').on('click','.ajaxlink',function(e){e.preventDefault();var link=$(this).attr('data-href')?$(this).attr('data-href'):$(this).attr('href');var ask=$(this).attr('data-ask');var askModal=$(this).attr('data-modal');var template=$("#msgModalTemplate").html();var callback=$(this).attr('data-callback');if(askModal!=null&&askModal!==undefined){var randomName="modal"+$.now();var modal="<div id=\""+randomName+"\" class=\"modal fade\"><div class=\"modal-sm modal-dialog\">"+template+"</div></div>";modal=modal.replace("{TemplateAjax}",link);modal=modal.replace("{TemplateMessage}",askModal);$("body").append(modal);$("#"+randomName).modal("show");return false;}else if(ask&&!confirm(ask)){return false;}
X.get(link,callback);return false;});X.ajaxSubmit();$("#order").on("submit",function(){$("#js-finalpedido").attr("disabled","true");return true;});$("#endr").change(function(){var val=$(this).val();val=parseInt(val);if(!isNaN(val)){if(val==0){$("#novoEndr").show();$("#existEndr").hide();$("#existEndr").html('');$("#freteloading").hide();$("#pedFretes").html('Endere�o de entrega n�o informado');$('form#js-novoendr').find("input[type='text'], select").each(function(){if($(this).attr('id')!='endr'){$(this).val('');}});}
else if(val>0){var urlEndr=$(this).attr('data-endr');var urlFrete=$(this).attr('data-frete');if(urlEndr){urlEndr=urlEndr+'&id='+val;$("#freteloading").show();$("#pedFretes").html('');X.get(urlEndr);$("#novoEndr").hide();$("#existEndr").show();}
if(urlFrete){urlFrete=urlFrete+'&endereco='+val;$("#freteloading").show();$("#pedFretes").html('');X.get(urlFrete);}}}});$('#existEndr').find('.cep').each(function(){value=$(this).val();if(value.length>0){$('#endr').trigger('change');}});$('#endr').trigger('change');$(document).unbind("change").on('change','#opcid',function(){var opcao=parseInt($(this).val());if(opcao>0){if($(".modal").length!=0)
var prod=$(".modal #prodid").val();else
var prod=$("#prodid").val();var url=$("#urlajax").val();url=url+"/produto.php?act=opcao";url=url+"&produto="+prod;url=url+"&opcao="+opcao;if($(".modal").length!=0){var qtde=parseInt($("input#qtd_"+prod).val());url=url+"&qtd_"+prod+"="+qtde;url=url+"&modal=1";}
X.get(url);$(document).on('jsonSuccess',function(){$("#tamid").trigger('change');});}});$("#opcid").val($("#opcid option:eq(1)").val());$("#opcid").trigger('change');$(document).on('modalCreated',function(){setTimeout(function(){$(".modal #opcid").val($(".modal #opcid option:eq(1)").val());$(".modal #opcid").trigger('change')},1000);});$(document).on("change","#tamid",function(){if($(".modal").length!=0){var tamanho=parseInt($(".modal #tamid").val());var prod=$(".modal #prodid").val();var opcao=$(".modal #opcid").val();}
else{var tamanho=parseInt($(this).val());var prod=$("#prodid").val();var opcao=$("#opcid").val();}
if(tamanho>0){var url=$("#urlajax").val();url=url+"/produto.php?act=tamanho";url=url+"&produto="+prod;url=url+"&tamanho="+tamanho;url=url+"&opcao="+opcao;if($(".modal").length!=0){var qtde=parseInt($("input#qtd_"+prod).val());url=url+"&qtd_"+prod+"="+qtde;url=url+"&modal=1";}
X.get(url);}});$(document).on("change",".tipopag",function(){var val=$(this).val();$("#cartao").addClass('hide').removeClass('show').hide();$("#cartao input[type='text']").val('');$("#braspag").addClass('hide').removeClass('show').hide();$("#braspag input[type='text']").val('');if(val==4||val=='4'){$("#cartao").removeClass('hide').removeClass('show').show();}
else if(val==7||val=='7'){$("#braspag").removeClass('hide').removeClass('show').show();}
if(val==2||val=='2')
$("#pagseguro").removeClass('hide').removeClass('show').show();else
$("#pagseguro").removeClass('hide').removeClass('show').hide();if(val==1||val=='1'){$("#taxaboleto").removeClass('hide').removeClass('show').show();$("#boleto").removeClass('hide').removeClass('show').show();}
else{$("#taxaboleto").removeClass('hide').removeClass('show').hide();$("#boleto").removeClass('hide').removeClass('show').hide();}
if(val==5||val=='5'){$("#deposito").removeClass('hide').removeClass('show').show();}
else
$("#deposito").removeClass('hide').removeClass('show').hide();if(val==8||val=='8')
$("#dinheiro").removeClass('hide').removeClass('show').show();else
$("#dinheiro").removeClass('hide').removeClass('show').hide();if(val){var ajax=$(this).attr('data-ajax');var url=$("#urlajax").val()+'/'+ajax+'&pgto='+val;X.get(url);}});$('a[href="#"], a[href=""]').on('click',function(){return false;});$(".numeric").on('keypress',function(e){return(e.which!=8&&e.which!=0&&(e.which<48||e.which>57))?false:true;});$(document).on('click','.up',function(){var id=$(this).attr('alt');var input=$("input#qtd_"+id);var val=0;if(input.val()!='')
var val=parseInt(input.val());input.val(val+1);input.attr('value',val+1);});$(document).on('click','.down',function(){var id=$(this).attr('alt');var input=$("input#qtd_"+id);var val=2;if(input.val()!='')
var val=parseInt(input.val());if(val>1){input.val(val-1);input.attr('value',val-1);}});$(".tipopessoa").change(function(){var val=$(this).val();if(val=='fisica'){$("#juridica input[type='text'], #juridica select").val("");$("#juridica").hide();$("#fisica").show();}
else if(val=='juridica'){$("#fisica input[type='text'], #fisica select").val("");$("#fisica").hide();$("#juridica").show();}});$("#js-isento_ie").change(function(){var isento=$("#js-isento_ie:checked").val();if(isento=="S"){$("#js-ie").attr("disabled","true");$("#js-ie").val("");}else{$("#js-ie").removeAttr("disabled");}});$('select.js-datashow').on('change',function(){$('.js-hidedatashow').css('display','none');id=$(this).find('option:selected').attr('data-show');if(id!==undefined)
$('#'+id).css('display','block');});$('select').each(function(){if($(this).attr('data-selectedval')!==undefined&&$(this).attr('data-selectedval')!=''){var select=$(this);var option=$('option[value="'+select.attr('data-selectedval')+'"]');option.attr('selected','selected');select.val(option.attr('value'));select.trigger('change');}});$(document).on("blur",".cep, .ceporiginal",function(){var element=$(this);var cep=$(this).val();var endIndex=$(this).attr('data-endindex');var add='';if(endIndex!=undefined)
add='[data-endindex="'+endIndex+'"]';var u=$("#urlajax").val()+'/endereco.php?act=cep&cep='+cep;if(cep.length==0)
return;$.ajax({url:u,type:"GET",dataType:"json"}).done(function(data){if(!element.hasClass('ceporiginal')){if(data["logradouro"]){$(add+".wsrua").val(data["logradouro"]);$(add+".wsbairro").val(data["bairro"]);$(add+".wscidade").val(data["cidade"]);$(add+".wsuf").val(data["estado"]);$(add+".wsnumero").focus();}else{$(add+".wsrua").val('');$(add+".wsbairro").val('');$(add+".wscidade").val('');$(add+".wsuf").val('');}}
if(typeof Checkout!="undefined"){Checkout.address(true);}
var url=$("#urlajax").val()+'/pedido.php?act=fretes';if(url){var url=url+"&cep="+cep;$("#freteloading").show();$("#pedFretes").html('');X.get(url);}});});if($("#bannerEbit").length>0){var ebitInterval=setInterval(function(){var el=$("#bannerEbit");var img=el.children('img');if(img.attr('src')!=el.attr('data-src')){img.attr('src',el.attr('data-src'));window.clearInterval(ebitInterval);}},50);}
$("#ordenacao").change(function(){var ordem=$(this).val();var href=$(location).attr('href');var loc=href.split('?')
var base=loc[0]
var query='';if(loc[1]){if(loc[1].toLowerCase().indexOf("ord=")==-1){href=href+'&ord='+ordem;window.location=href;}
else{var q=loc[1].split('&');for(var i=0;i<q.length;i++){var item=q[i].split('='),param=item[0];if(i==0){query+='?';}
else{query+='&';}
query+=param+'=';if(param=='ord'){query+=ordem;}
else if(item[1]){query+=item[1];}}
window.location=base+query;}}else{if(href.indexOf("?")>=0)
href=href+'ord='+ordem;else
href=href+'?ord='+ordem;window.location=href;}});});